<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.baseleap.mapper.UserMapper">

    <select id="login"
            resultType="com.baseleap.model.UserModel">
        select
            id,
            email,
            password,
            nickname,
            profile_image as profileImage,
            user_introduce as userIntroduce,
            created_time as createdTime,
            last_login_time as lastLoginTime,
            validation_quiz_question as validationQuizQuestion,
            validationq_uiz_answer as validationQuizAnswer
        from	user
        where  email = #{email}
        and     password  = #{password}
    </select>

    <select id="getUser" parameterType="String"
            resultType="com.baseleap.model.UserModel">
        select
        id,
        email,
        password,
        nickname,
        profile_image as profileImage,
        user_introduce as userIntroduce,
        created_time as createdTime,
        last_login_time as lastLoginTime,
        validation_quiz_question as validationQuizQuestion,
        validationq_uiz_answer as validationQuizAnswer
        from	user
        where  email = #{email}
    </select>


    <update id="userUpdateLastLoginTime"
            parameterType="com.baseleap.model.UserModel">
        UPDATE User
        SET
        last_login_time = now()
        WHERE email = #{email}
    </update>

</mapper>